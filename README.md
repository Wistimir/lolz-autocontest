## Преимущества
- Работает без эмуляции браузера
- Работает без нейронных сетей с примерно 95% правильных решений
- Бесплатно, в отличии от версии waslost

# Установка и запуск

### Linux
1. Скачиваем и устанавливаем python3, pip3 и git `sudo apt install python3 python3-pip git`
1. Скачиваем и переходим в репозиторий `git clone https://github.com/Wistimir/lolz-autocontest-truncated.git; cd lolz-autocontest`
1. Устанавливаем пакеты нужные для работы.
`pip3 install -U -r requirements.txt`
1. Переименовываем settings.example.json в settings.json и редактируем в соответствии с секцией [Настройки](#Настройки)
1. Запускаем в заднем фоне `bash ./start-background.sh`

Остановить потом можно с помощью `bash ./stop-background.sh`

### Windows
1. Скачиваем и устанавливаем python3 и pip3
1. Нажимаем Code -> Download ZIP чтобы скачать репозиторий
1. Распаковываем куда удобно
1. Открываем cmd
1. Меняем директорию в папку с распакованным репозиторием <br> 
`cd C:\Path\To\repo` <br>
место `C:\Path\To\repo` естественно пишем путь к распакованному репозиторию
1. Устанавливаем пакеты нужные для работы.
`py -m pip install -U -r requirements.txt` <br>
1. Переименовываем settings.example.json в settings.json и редактируем в соответствии с секцией [Настройки](#Настройки)
1. Запускаем `py main.py`

# Обновление

### Linux
1. `cd lolz-autocontest`
1. `git pull`
1. `pip3 install -U -r requirements.txt`
1. Проверяем то что ваш `settings.json` совместим с новым `settings.example.json`. Обновляем если не совместим.

### Windows
1. `cd C:\Path\To\repo` <br>
   место `C:\Path\To\repo` естественно пишем путь к распакованному репозиторию
1. Как то получаете новый репозиторий. Например скачиваете и перезаписываете файлы
1. `py -m pip install -U -r requirements.txt`
1. Проверяем то что ваш `settings.json` совместим с новым `settings.example.json`. Обновляем если не совместим.

# Настройки
- `user`: Объект пользователя
  - `User-Agent`: Юзер агент который аккаунт будет использовать ([Получение значения](#Получение-юзер-агента))
  - `cookies`: Список кук которые аккаунт будет использовать
    - `xf_user`: Кука аккаунта ([Получение значения](#Получение-кук))
    - `xf_tfa_trust`: (опционально) Кука двухфакторной авторизации ([Получение значения](#Получение-кук))
- `lolz_domain`: Домен который lolzteam сейчас использует
- `found_count`: Если есть новый розыгрыш, проверять розыгрыши каждые `low_time` секунд `found_count` раз. Это сделано на случай спама розыгрышами
- `low_time`: Проверять каждые `low_time` секунд если нашелся новый розыгрыш
- `high_time`: Проверять каждые `high_time` секунд если нету новых розыгрышей
- `switch_time`: Подождать `switch_time` секунд между розыгрышами
- `solve_time`: "Проходить" розыгрыш `solve_time` секунд

# Получение юзер агента
1. Заходим на https://www.whatsmyua.info/
1. Копируем свой юзер агент ниже `Enter a user-agent string:` (в моем случае это `Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:86.0) Gecko/20100101 Firefox/86.0`)
1. Изменяем `User-Agent` на свой юзер агент

# Получение кук
Если у вас нету `xf_tfa_trust` то не паникуем, его может не быть, удаляем эту строку и запятую с предыдущей строки.

Для firefox:
1. Нажимаем f12 на вкладке lolz.guru
1. Открываем вкладку Хранилище
1. Раскрываем меню Куки
1. Нажимаем https://lolz.guru
1. Заполняем xf_user и xf_tfa_trust в наших [настройках](#Настройки)

Для chrome:
1. Нажимаем f12 на вкладке lolz.guru
1. Открываем вкладку Application (Она может быть спрятана в ">>")
1. Раскрываем меню Cookies
1. Нажимаем https://lolz.guru
1. Заполняем xf_user и xf_tfa_trust в наших [настройках](#Настройки)

# Known issues
- При каком-то стечении обстоятельств лолз после js запроса удаляет xf_users и xf_logged_in. Прога при этом ничего не пишет кроме loop at. Возможно невалид кука?
